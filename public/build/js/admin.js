function e(){t(),o(),a(),n(),gestionarUsuarios()}function t(){const e=document.querySelector("#fecha");e&&e.addEventListener("input",(function(e){const t=e.target.value;window.location="?fecha="+t}))}function o(){document.querySelectorAll(".estado-cita").forEach(e=>{e.addEventListener("change",(function(e){const t=e.target.dataset.citaId,o=e.target.value,a=e.target.closest(".bg-white").querySelector(".estado-badge");Swal.fire({title:"Actualizando...",text:"Por favor espere",allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{Swal.showLoading()}});const n=new FormData;n.append("id",t),n.append("estado",o);try{fetch("/api/citas/estado",{method:"POST",body:n}).then(e=>e.json()).then(e=>{if("exito"===e.tipo){const e={pendiente:"bg-yellow-100 text-yellow-800",completada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"};a.className="estado-badge px-3 py-1 rounded-full text-sm font-medium",a.classList.add(...e[o].split(" ")),a.textContent=o.charAt(0).toUpperCase()+o.slice(1),Swal.fire({icon:"success",title:"Estado Actualizado",text:"El estado de la cita se actualizÃ³ correctamente",showConfirmButton:!1,timer:1500})}})}catch(e){Swal.fire({icon:"error",title:"Error",text:"Hubo un error al actualizar el estado"})}}))})}function a(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");e.forEach(o=>{o.addEventListener("click",(function(){e.forEach(e=>{e.classList.remove("border-blue-500","text-blue-600"),e.classList.add("border-transparent","text-gray-500")}),t.forEach(e=>{e.classList.add("hidden")}),this.classList.remove("border-transparent","text-gray-500"),this.classList.add("border-blue-500","text-blue-600");const o=this.dataset.tab,a=document.querySelector(`#${o}-tab`);a&&a.classList.remove("hidden")}))})}function n(){const e=document.querySelector("#nuevo-servicio");e&&e.addEventListener("click",(function(){mostrarFormularioServicio()}));document.querySelectorAll(".editar-servicio").forEach(e=>{e.addEventListener("click",(function(){const e=this.dataset.id;editarServicio(e)}))});document.querySelectorAll(".eliminar-servicio").forEach(e=>{e.addEventListener("click",(function(){const e=this.dataset.id;eliminarServicio(e)}))})}document.addEventListener("DOMContentLoaded",(function(){e()}));
//# sourceMappingURL=admin.js.map
